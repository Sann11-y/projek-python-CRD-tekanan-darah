flowchart TD
    Start([Function: buatData]) --> Header[/Tampilkan Header<br/>TAMBAH DATA PASIEN/]
    Header --> InputNama[/Input Nama/]
    
    InputNama --> LoopBB[While Loop:<br/>Input BB & TB]
    LoopBB --> InputBB[/Input Berat Badan kg/]
    InputBB --> InputTB[/Input Tinggi Badan cm/]
    
    InputTB --> TryCatch1{Try-Catch<br/>ValueError?}
    TryCatch1 -->|Error| ErrorType1[/Error:<br/>Input harus berupa angka/]
    ErrorType1 --> LoopBB
    
    TryCatch1 -->|OK| ValidBBTB{BB > 0<br/>AND<br/>TB > 0?}
    ValidBBTB -->|Tidak| ErrorPositif[/Error:<br/>Harus Positif/]
    ErrorPositif --> LoopBB
    ValidBBTB -->|Ya| BreakBB[Break Loop]
    
    BreakBB --> LoopUmur[While Loop:<br/>Input Umur]
    LoopUmur --> InputUmur[/Input Umur/]
    InputUmur --> TryCatch2{Try-Catch<br/>ValueError?}
    TryCatch2 -->|Error| ErrorType2[/Error:<br/>Input harus angka/]
    ErrorType2 --> LoopUmur
    
    TryCatch2 -->|OK| CheckUmur1{Umur > 0?}
    CheckUmur1 -->|Tidak| ErrorUmur1[/Error:<br/>Umur Harus Positif/]
    ErrorUmur1 --> LoopUmur
    
    CheckUmur1 -->|Ya| CheckUmur2{Umur >= 6?}
    CheckUmur2 -->|Tidak| ErrorUmur2[/Error:<br/>Minimal 6 Tahun/]
    ErrorUmur2 --> LoopUmur
    CheckUmur2 -->|Ya| BreakUmur[Break Loop]
    
    BreakUmur --> LoopTekanan[While Loop:<br/>Input Tekanan]
    LoopTekanan --> InputSistol[/Input Sistol/]
    InputSistol --> InputDiastol[/Input Diastol/]
    
    InputDiastol --> TryCatch3{Try-Catch<br/>ValueError?}
    TryCatch3 -->|Error| ErrorType3[/Error:<br/>Input harus angka/]
    ErrorType3 --> LoopTekanan
    
    TryCatch3 -->|OK| CheckRange{Sistol & Diastol<br/>Positif?<br/>50-300 & 30-200?}
    CheckRange -->|Tidak| ErrorRange[/Error:<br/>Tidak Masuk Akal/]
    ErrorRange --> LoopTekanan
    
    CheckRange -->|Ya| CheckSistolik{Sistol ><br/>Diastol?}
    CheckSistolik -->|Tidak| ErrorSistolik[/Error:<br/>Sistol > Diastol/]
    ErrorSistolik --> LoopTekanan
    
    CheckSistolik -->|Ya| CheckWide{Sistol - Diastol<br/>>= 60?}
    CheckWide -->|Ya| ErrorWide[/Error:<br/>Wide Pulse Pressure<br/>Di Luar Konteks/]
    ErrorWide --> LoopTekanan
    
    CheckWide -->|Tidak| CheckNarrow{Sistol - Diastol<br/>< 30?}
    CheckNarrow -->|Ya| ErrorNarrow[/Error:<br/>Narrow Pulse Pressure<br/>Di Luar Konteks/]
    ErrorNarrow --> LoopTekanan
    
    CheckNarrow -->|Tidak| BreakTekanan[Break Loop]
    BreakTekanan --> CallCreate[(Call database.create:<br/>nama, bb, tb,<br/>umur, sistol, diastol)]
    
    CallCreate --> HitungBMI[Hitung BMI:<br/>bb / tb/100Â²]
    HitungBMI --> CallKlasifikasiBMI[Call:<br/>klasifikasiBmi<br/>bmi]
    CallKlasifikasiBMI --> CallKlasifikasiTekanan[Call:<br/>klasifikasiTekanan<br/>umur, sistol, diastol]
    
    CallKlasifikasiTekanan --> BuatDict[Buat Dictionary:<br/>nama, beratBadan, tinggiBadan,<br/>umur, sistol, diastol,<br/>diagnosa, bmi, kategoriBmi,<br/>saranGemini: empty string]
    BuatDict --> AppendDB[(Append ke<br/>dfPasien list)]
    AppendDB --> ReturnTrue[Return True]
    
    ReturnTrue --> Success[/Tampilkan:<br/>Data Berhasil Ditambahkan<br/>Total: X pasien/]
    Success --> Return([Return])

    style Start fill:#90EE90
    style Return fill:#FFB6C6
    style AppendDB fill:#87CEEB
    style CallCreate fill:#87CEEB
    style HitungBMI fill:#FFE4B5
    style CallKlasifikasiBMI fill:#FFE4B5
    style CallKlasifikasiTekanan fill:#FFE4B5